<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ƒê∆°n h√†ng c·ªßa t√¥i</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; padding: 20px; }
        .order-form, .thank-you-box {
            max-width: 700px; margin: auto; background: #fff; padding: 20px; border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;
        }
        h2 { text-align: center; }
        label { display: block; margin-top: 10px; text-align: left; }
        input, textarea { width: 100%; padding: 8px; margin-top: 5px; border-radius: 4px; border: 1px solid #ccc; }
        table { width: 100%; margin-top: 20px; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background: #f0f0f0; }
        .total, .discount, .gift { text-align: right; font-weight: bold; margin-top: 10px; }
        button { margin-top: 10px; padding: 14px; width: 100%; background: #4CAF50; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 22px; }
        button:hover { background: #45a049; }
        .voucher-section { margin-top: 20px; }
        .thank-you-box { display: none; font-size: 18px; }
        .thank-you-box h3 { color: #4CAF50; font-size: 24px; margin-bottom: 20px; }
    </style>
</head>
<body>

<div class="order-form" id="orderForm">
    <h2>ƒê∆°n H√†ng C·ªßa T√¥i</h2>

    <form onsubmit="return submitOrder()">
        <label>H·ªç v√† t√™n:</label>
        <input type="text" id="fullname" required>

        <label>ƒê·ªãa ch·ªâ nh·∫≠n h√†ng:</label>
        <textarea id="address" rows="2" required></textarea>

        <table>
            <thead>
                <tr>
                    <th>S·∫£n ph·∫©m</th>
                    <th>ƒê∆°n gi√°</th>
                    <th>S·ªë l∆∞·ª£ng</th>
                    <th>Th√†nh ti·ªÅn</th>
                </tr>
            </thead>
            <tbody id="productTable">
                <tr>
                    <td>ƒê·ªìng h·ªì Rolex nam Saphiere d√¢y th√©p kh√¥ng g·ªâ-RLXS45</td>
                    <td>5.950.000‚Ç´</td>
                    <td><input type="number" min="0" value="0" onchange="updateItem('279171')"></td>
                    <td id="itemTotal-279171">0‚Ç´</td>
                </tr>
            </tbody>
        </table>

        <div class="voucher-section">
            <label>M√£ Voucher (n·∫øu c√≥):</label>
            <input type="text" id="voucherCode">
            <button type="button" onclick="applyVoucher()">√Åp d·ª•ng m√£</button>
        </div>

        <div class="discount" id="discountAmount">Gi·∫£m gi√°: 0‚Ç´</div>
        <div class="total" id="totalAmount">T·ªïng c·ªông: 0‚Ç´</div>
        <div class="gift" id="giftInfo" style="display: none;">üéÅ Qu√† t·∫∑ng: </div>

        <button type="submit">X√ÅC NH·∫¨N ƒê·∫∂T H√ÄNG</button>
    </form>
</div>

<div class="thank-you-box" id="thankYouBox">
    <h3>C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t h√†ng t·∫°i Authwatch!</h3>
    <p>Ch√∫ng t√¥i s·∫Ω chu·∫©n b·ªã h√†ng v√† g·ª≠i s·ªõm t·ªõi b·∫°n.</p>
    <p>B·∫°n vui l√≤ng theo d√µi h√†nh tr√¨nh ƒë∆°n h√†ng qua th√¥ng b√°o.</p>
    <p><strong>Authwatch h√¢n h·∫°nh ƒë∆∞·ª£c ph·ª•c v·ª• b·∫°n!</strong></p>
</div>

<script>
    const products = {
        '279171': { name: 'Rolex Datejust Ladies 279171', price: 5950000 },
    };

    const vouchers = {
        'FOLLOWNHA': { type: 'discount', value: 50000 },
        'CAMONBAN': { type: 'discount', value: 2200000 },
        'BUOICHIEUVUIVE': { type: 'discount', value: 78000 },
        'BANLASO1': { type: 'gift', value: '(Qu√† t·∫∑ng) L∆∞u voucher cho ƒë∆°n h√†ng sau' },
        'YEUBAN': { type: 'gift', value: '(Qu√† t·∫∑ng) D√¢y da cao c·∫•p' },
        'SHOPONE_06': { type: 'gift', value: '(Qu√† t·∫∑ng) D·ª•ng c·ª• c·∫Øt m·∫Øt m·∫Øt' },
    };

    let cart = { '279171': 0 };
    let appliedDiscount = 0;
    let appliedGift = '';

    function updateItem(id) {
        const quantity = parseInt(document.querySelector(`input[onchange="updateItem('${id}')"]`).value) || 0;
        cart[id] = quantity;
        updateCartDisplay();
    }

    function applyVoucher() {
        const code = document.getElementById('voucherCode').value.trim().toUpperCase();
        if (vouchers[code]) {
            const voucher = vouchers[code];
            if (voucher.type === 'discount') {
                appliedDiscount = voucher.value;
                appliedGift = '';
                alert(`√Åp d·ª•ng m√£ th√†nh c√¥ng! Gi·∫£m ${formatCurrency(appliedDiscount)}`);
            } else if (voucher.type === 'gift') {
                appliedGift = voucher.value;
                appliedDiscount = 0;
                alert(`√Åp d·ª•ng m√£ th√†nh c√¥ng! Nh·∫≠n ${appliedGift}`);
            }
        } else {
            appliedDiscount = 0;
            appliedGift = '';
            alert('M√£ voucher kh√¥ng h·ª£p l·ªá.');
        }
        updateCartDisplay();
    }

    function updateCartDisplay() {
        let total = 0;
        for (let id in cart) {
            const itemTotal = products[id].price * cart[id];
            document.getElementById(`itemTotal-${id}`).innerText = formatCurrency(itemTotal);
            total += itemTotal;
        }

        const finalTotal = Math.max(total - appliedDiscount, 0);
        document.getElementById('discountAmount').innerText = `Gi·∫£m gi√°: ${formatCurrency(appliedDiscount)}`;
        document.getElementById('totalAmount').innerText = `T·ªïng c·ªông: ${formatCurrency(finalTotal)}`;

        const giftDiv = document.getElementById('giftInfo');
        if (appliedGift) {
            giftDiv.style.display = 'block';
            giftDiv.innerText = `üéÅ Qu√† t·∫∑ng: ${appliedGift}`;
        } else {
            giftDiv.style.display = 'none';
        }
    }

    function formatCurrency(amount) {
        return amount.toLocaleString('vi-VN') + '‚Ç´';
    }

    function submitOrder() {
        const name = document.getElementById('fullname').value.trim();
        const address = document.getElementById('address').value.trim();
        if (!name || !address) {
            alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß h·ªç t√™n v√† ƒë·ªãa ch·ªâ.');
            return false;
        }
        const totalQuantity = Object.values(cart).reduce((a, b) => a + b, 0);
        if (totalQuantity === 0) {
            alert('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt s·∫£n ph·∫©m.');
            return false;
        }

        // ·∫®n form, hi·ªán box c·∫£m ∆°n
        document.getElementById('orderForm').style.display = 'none';
        document.getElementById('thankYouBox').style.display = 'block';

        return false; // ch·∫∑n g·ª≠i form th·ª±c t·∫ø (demo)
    }
</script>

</body>
</html>
